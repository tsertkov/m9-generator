'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = normalize;


function normalize(content) {
  Object.keys(content).forEach(contentType => {
    const entities = content[contentType];
    if (Array.isArray(entities)) {
      entities.forEach(entity => {
        removeCruft(entity);
        normalizeTitle(entity);
        normalizeAcf(entity);
      });
    } else {
      removeCruft(entities);
      normalizeTitle(entities);
      normalizeAcf(entities);
    }
  });
  return content;
}

function removeCruft(entity) {
  delete entity._links;
  delete entity.link;
  delete entity.modified_gmt;
  delete entity.date_gmt;
  delete entity.guid;
}

function normalizeTitle(entity) {
  if (typeof entity.title !== 'object') return;
  entity.title = entity.title.rendered;
  delete entity.title.rendered;
}

function normalizeAcf(entity) {
  if ('acf' in entity) {
    Object.keys(entity.acf).forEach(acfPropertyName => {
      if (acfPropertyName === '') return;
      entity[acfPropertyName] = entity.acf[acfPropertyName];
    });
    delete entity.acf;
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9saWIvY29udGVudC10cmFuc2Zvcm1lcnMvd29yZHByZXNzL25vcm1hbGl6ZS5qcyJdLCJuYW1lcyI6WyJub3JtYWxpemUiLCJjb250ZW50IiwiT2JqZWN0Iiwia2V5cyIsImZvckVhY2giLCJjb250ZW50VHlwZSIsImVudGl0aWVzIiwiQXJyYXkiLCJpc0FycmF5IiwiZW50aXR5IiwicmVtb3ZlQ3J1ZnQiLCJub3JtYWxpemVUaXRsZSIsIm5vcm1hbGl6ZUFjZiIsIl9saW5rcyIsImxpbmsiLCJtb2RpZmllZF9nbXQiLCJkYXRlX2dtdCIsImd1aWQiLCJ0aXRsZSIsInJlbmRlcmVkIiwiYWNmIiwiYWNmUHJvcGVydHlOYW1lIl0sIm1hcHBpbmdzIjoiOzs7OztrQkFBZUEsUzs7O0FBRWYsU0FBU0EsU0FBVCxDQUFvQkMsT0FBcEIsRUFBNkI7QUFDM0JDLFNBQU9DLElBQVAsQ0FBWUYsT0FBWixFQUFxQkcsT0FBckIsQ0FBNkJDLGVBQWU7QUFDMUMsVUFBTUMsV0FBV0wsUUFBUUksV0FBUixDQUFqQjtBQUNBLFFBQUlFLE1BQU1DLE9BQU4sQ0FBY0YsUUFBZCxDQUFKLEVBQTZCO0FBQzNCQSxlQUFTRixPQUFULENBQWlCSyxVQUFVO0FBQ3pCQyxvQkFBWUQsTUFBWjtBQUNBRSx1QkFBZUYsTUFBZjtBQUNBRyxxQkFBYUgsTUFBYjtBQUNELE9BSkQ7QUFLRCxLQU5ELE1BTU87QUFDTEMsa0JBQVlKLFFBQVo7QUFDQUsscUJBQWVMLFFBQWY7QUFDQU0sbUJBQWFOLFFBQWI7QUFDRDtBQUNGLEdBYkQ7QUFjQSxTQUFPTCxPQUFQO0FBQ0Q7O0FBRUQsU0FBU1MsV0FBVCxDQUFzQkQsTUFBdEIsRUFBOEI7QUFDNUIsU0FBT0EsT0FBT0ksTUFBZDtBQUNBLFNBQU9KLE9BQU9LLElBQWQ7QUFDQSxTQUFPTCxPQUFPTSxZQUFkO0FBQ0EsU0FBT04sT0FBT08sUUFBZDtBQUNBLFNBQU9QLE9BQU9RLElBQWQ7QUFDRDs7QUFFRCxTQUFTTixjQUFULENBQXlCRixNQUF6QixFQUFpQztBQUMvQixNQUFJLE9BQU9BLE9BQU9TLEtBQWQsS0FBd0IsUUFBNUIsRUFBc0M7QUFDdENULFNBQU9TLEtBQVAsR0FBZVQsT0FBT1MsS0FBUCxDQUFhQyxRQUE1QjtBQUNBLFNBQU9WLE9BQU9TLEtBQVAsQ0FBYUMsUUFBcEI7QUFDRDs7QUFFRCxTQUFTUCxZQUFULENBQXVCSCxNQUF2QixFQUErQjtBQUM3QixNQUFJLFNBQVNBLE1BQWIsRUFBcUI7QUFDbkJQLFdBQU9DLElBQVAsQ0FBWU0sT0FBT1csR0FBbkIsRUFBd0JoQixPQUF4QixDQUFnQ2lCLG1CQUFtQjtBQUNqRCxVQUFJQSxvQkFBb0IsRUFBeEIsRUFBNEI7QUFDNUJaLGFBQU9ZLGVBQVAsSUFBMEJaLE9BQU9XLEdBQVAsQ0FBV0MsZUFBWCxDQUExQjtBQUNELEtBSEQ7QUFJQSxXQUFPWixPQUFPVyxHQUFkO0FBQ0Q7QUFDRiIsImZpbGUiOiJub3JtYWxpemUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBub3JtYWxpemVcblxuZnVuY3Rpb24gbm9ybWFsaXplIChjb250ZW50KSB7XG4gIE9iamVjdC5rZXlzKGNvbnRlbnQpLmZvckVhY2goY29udGVudFR5cGUgPT4ge1xuICAgIGNvbnN0IGVudGl0aWVzID0gY29udGVudFtjb250ZW50VHlwZV1cbiAgICBpZiAoQXJyYXkuaXNBcnJheShlbnRpdGllcykpIHtcbiAgICAgIGVudGl0aWVzLmZvckVhY2goZW50aXR5ID0+IHtcbiAgICAgICAgcmVtb3ZlQ3J1ZnQoZW50aXR5KVxuICAgICAgICBub3JtYWxpemVUaXRsZShlbnRpdHkpXG4gICAgICAgIG5vcm1hbGl6ZUFjZihlbnRpdHkpXG4gICAgICB9KVxuICAgIH0gZWxzZSB7XG4gICAgICByZW1vdmVDcnVmdChlbnRpdGllcylcbiAgICAgIG5vcm1hbGl6ZVRpdGxlKGVudGl0aWVzKVxuICAgICAgbm9ybWFsaXplQWNmKGVudGl0aWVzKVxuICAgIH1cbiAgfSlcbiAgcmV0dXJuIGNvbnRlbnRcbn1cblxuZnVuY3Rpb24gcmVtb3ZlQ3J1ZnQgKGVudGl0eSkge1xuICBkZWxldGUgZW50aXR5Ll9saW5rc1xuICBkZWxldGUgZW50aXR5LmxpbmtcbiAgZGVsZXRlIGVudGl0eS5tb2RpZmllZF9nbXRcbiAgZGVsZXRlIGVudGl0eS5kYXRlX2dtdFxuICBkZWxldGUgZW50aXR5Lmd1aWRcbn1cblxuZnVuY3Rpb24gbm9ybWFsaXplVGl0bGUgKGVudGl0eSkge1xuICBpZiAodHlwZW9mIGVudGl0eS50aXRsZSAhPT0gJ29iamVjdCcpIHJldHVyblxuICBlbnRpdHkudGl0bGUgPSBlbnRpdHkudGl0bGUucmVuZGVyZWRcbiAgZGVsZXRlIGVudGl0eS50aXRsZS5yZW5kZXJlZFxufVxuXG5mdW5jdGlvbiBub3JtYWxpemVBY2YgKGVudGl0eSkge1xuICBpZiAoJ2FjZicgaW4gZW50aXR5KSB7XG4gICAgT2JqZWN0LmtleXMoZW50aXR5LmFjZikuZm9yRWFjaChhY2ZQcm9wZXJ0eU5hbWUgPT4ge1xuICAgICAgaWYgKGFjZlByb3BlcnR5TmFtZSA9PT0gJycpIHJldHVyblxuICAgICAgZW50aXR5W2FjZlByb3BlcnR5TmFtZV0gPSBlbnRpdHkuYWNmW2FjZlByb3BlcnR5TmFtZV1cbiAgICB9KVxuICAgIGRlbGV0ZSBlbnRpdHkuYWNmXG4gIH1cbn1cbiJdfQ==