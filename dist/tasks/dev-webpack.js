'use strict';

var _gulp = require('gulp');

var _gulp2 = _interopRequireDefault(_gulp);

var _pluginError = require('plugin-error');

var _pluginError2 = _interopRequireDefault(_pluginError);

var _webpack = require('webpack');

var _webpack2 = _interopRequireDefault(_webpack);

var _webpackDevServer = require('webpack-dev-server');

var _webpackDevServer2 = _interopRequireDefault(_webpackDevServer);

var _config = require('../config');

var _config2 = _interopRequireDefault(_config);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

_gulp2.default.task('dev-webpack', callback => {
  const compiler = (0, _webpack2.default)(_config2.default.webpack);
  const webpackDevServer = new _webpackDevServer2.default(compiler, {
    contentBase: _config2.default.paths.dst,
    publicPath: _config2.default.assets.publicPath,
    stats: {
      colors: true
    }
  });

  webpackDevServer.listen(_config2.default.dev.webpackPort, _config2.default.dev.host, err => {
    if (err) throw new _pluginError2.default('webpack-dev-server', err);
  });

  webpackDevServer.middleware.waitUntilValid(() => callback());
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy90YXNrcy9kZXYtd2VicGFjay5qcyJdLCJuYW1lcyI6WyJndWxwIiwidGFzayIsImNhbGxiYWNrIiwiY29tcGlsZXIiLCJjb25maWciLCJ3ZWJwYWNrIiwid2VicGFja0RldlNlcnZlciIsIldlYnBhY2tEZXZTZXJ2ZXIiLCJjb250ZW50QmFzZSIsInBhdGhzIiwiZHN0IiwicHVibGljUGF0aCIsImFzc2V0cyIsInN0YXRzIiwiY29sb3JzIiwibGlzdGVuIiwiZGV2Iiwid2VicGFja1BvcnQiLCJob3N0IiwiZXJyIiwiUGx1Z2luRXJyb3IiLCJtaWRkbGV3YXJlIiwid2FpdFVudGlsVmFsaWQiXSwibWFwcGluZ3MiOiI7O0FBQUE7Ozs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7Ozs7O0FBRUFBLGVBQUtDLElBQUwsQ0FBVSxhQUFWLEVBQTBCQyxRQUFELElBQWM7QUFDckMsUUFBTUMsV0FBVyx1QkFBUUMsaUJBQU9DLE9BQWYsQ0FBakI7QUFDQSxRQUFNQyxtQkFBbUIsSUFBSUMsMEJBQUosQ0FBcUJKLFFBQXJCLEVBQStCO0FBQ3RESyxpQkFBYUosaUJBQU9LLEtBQVAsQ0FBYUMsR0FENEI7QUFFdERDLGdCQUFZUCxpQkFBT1EsTUFBUCxDQUFjRCxVQUY0QjtBQUd0REUsV0FBTztBQUNMQyxjQUFRO0FBREg7QUFIK0MsR0FBL0IsQ0FBekI7O0FBUUFSLG1CQUFpQlMsTUFBakIsQ0FBd0JYLGlCQUFPWSxHQUFQLENBQVdDLFdBQW5DLEVBQWdEYixpQkFBT1ksR0FBUCxDQUFXRSxJQUEzRCxFQUFrRUMsR0FBRCxJQUFTO0FBQ3hFLFFBQUlBLEdBQUosRUFBUyxNQUFNLElBQUlDLHFCQUFKLENBQWdCLG9CQUFoQixFQUFzQ0QsR0FBdEMsQ0FBTjtBQUNWLEdBRkQ7O0FBSUFiLG1CQUFpQmUsVUFBakIsQ0FBNEJDLGNBQTVCLENBQTJDLE1BQU1wQixVQUFqRDtBQUNELENBZkQiLCJmaWxlIjoiZGV2LXdlYnBhY2suanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZ3VscCBmcm9tICdndWxwJ1xuaW1wb3J0IFBsdWdpbkVycm9yIGZyb20gJ3BsdWdpbi1lcnJvcidcbmltcG9ydCB3ZWJwYWNrIGZyb20gJ3dlYnBhY2snXG5pbXBvcnQgV2VicGFja0RldlNlcnZlciBmcm9tICd3ZWJwYWNrLWRldi1zZXJ2ZXInXG5pbXBvcnQgY29uZmlnIGZyb20gJy4uL2NvbmZpZydcblxuZ3VscC50YXNrKCdkZXYtd2VicGFjaycsIChjYWxsYmFjaykgPT4ge1xuICBjb25zdCBjb21waWxlciA9IHdlYnBhY2soY29uZmlnLndlYnBhY2spXG4gIGNvbnN0IHdlYnBhY2tEZXZTZXJ2ZXIgPSBuZXcgV2VicGFja0RldlNlcnZlcihjb21waWxlciwge1xuICAgIGNvbnRlbnRCYXNlOiBjb25maWcucGF0aHMuZHN0LFxuICAgIHB1YmxpY1BhdGg6IGNvbmZpZy5hc3NldHMucHVibGljUGF0aCxcbiAgICBzdGF0czoge1xuICAgICAgY29sb3JzOiB0cnVlXG4gICAgfVxuICB9KVxuXG4gIHdlYnBhY2tEZXZTZXJ2ZXIubGlzdGVuKGNvbmZpZy5kZXYud2VicGFja1BvcnQsIGNvbmZpZy5kZXYuaG9zdCwgKGVycikgPT4ge1xuICAgIGlmIChlcnIpIHRocm93IG5ldyBQbHVnaW5FcnJvcignd2VicGFjay1kZXYtc2VydmVyJywgZXJyKVxuICB9KVxuXG4gIHdlYnBhY2tEZXZTZXJ2ZXIubWlkZGxld2FyZS53YWl0VW50aWxWYWxpZCgoKSA9PiBjYWxsYmFjaygpKVxufSlcbiJdfQ==