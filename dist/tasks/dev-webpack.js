'use strict';

var _gulp = require('gulp');

var _gulp2 = _interopRequireDefault(_gulp);

var _gulpUtil = require('gulp-util');

var _gulpUtil2 = _interopRequireDefault(_gulpUtil);

var _webpack = require('webpack');

var _webpack2 = _interopRequireDefault(_webpack);

var _webpackDevServer = require('webpack-dev-server');

var _webpackDevServer2 = _interopRequireDefault(_webpackDevServer);

var _config = require('../config');

var _config2 = _interopRequireDefault(_config);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

_gulp2.default.task('dev-webpack', callback => {
  const compiler = (0, _webpack2.default)(_config2.default.webpack);
  const webpackDevServer = new _webpackDevServer2.default(compiler, {
    contentBase: _config2.default.paths.dst,
    publicPath: _config2.default.assets.publicPath,
    stats: {
      colors: true
    }
  });

  webpackDevServer.listen(_config2.default.dev.webpackPort, _config2.default.dev.host, err => {
    if (err) throw new _gulpUtil2.default.PluginError('webpack-dev-server', err);
  });

  webpackDevServer.middleware.waitUntilValid(() => {
    callback();
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy90YXNrcy9kZXYtd2VicGFjay5qcyJdLCJuYW1lcyI6WyJndWxwIiwidGFzayIsImNhbGxiYWNrIiwiY29tcGlsZXIiLCJjb25maWciLCJ3ZWJwYWNrIiwid2VicGFja0RldlNlcnZlciIsIldlYnBhY2tEZXZTZXJ2ZXIiLCJjb250ZW50QmFzZSIsInBhdGhzIiwiZHN0IiwicHVibGljUGF0aCIsImFzc2V0cyIsInN0YXRzIiwiY29sb3JzIiwibGlzdGVuIiwiZGV2Iiwid2VicGFja1BvcnQiLCJob3N0IiwiZXJyIiwiZ3V0aWwiLCJQbHVnaW5FcnJvciIsIm1pZGRsZXdhcmUiLCJ3YWl0VW50aWxWYWxpZCJdLCJtYXBwaW5ncyI6Ijs7QUFBQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7Ozs7QUFFQUEsZUFBS0MsSUFBTCxDQUFVLGFBQVYsRUFBMEJDLFFBQUQsSUFBYztBQUNyQyxRQUFNQyxXQUFXLHVCQUFRQyxpQkFBT0MsT0FBZixDQUFqQjtBQUNBLFFBQU1DLG1CQUFtQixJQUFJQywwQkFBSixDQUFxQkosUUFBckIsRUFBK0I7QUFDdERLLGlCQUFhSixpQkFBT0ssS0FBUCxDQUFhQyxHQUQ0QjtBQUV0REMsZ0JBQVlQLGlCQUFPUSxNQUFQLENBQWNELFVBRjRCO0FBR3RERSxXQUFPO0FBQ0xDLGNBQVE7QUFESDtBQUgrQyxHQUEvQixDQUF6Qjs7QUFRQVIsbUJBQWlCUyxNQUFqQixDQUF3QlgsaUJBQU9ZLEdBQVAsQ0FBV0MsV0FBbkMsRUFBZ0RiLGlCQUFPWSxHQUFQLENBQVdFLElBQTNELEVBQWtFQyxHQUFELElBQVM7QUFDeEUsUUFBSUEsR0FBSixFQUFTLE1BQU0sSUFBSUMsbUJBQU1DLFdBQVYsQ0FBc0Isb0JBQXRCLEVBQTRDRixHQUE1QyxDQUFOO0FBQ1YsR0FGRDs7QUFJQWIsbUJBQWlCZ0IsVUFBakIsQ0FBNEJDLGNBQTVCLENBQTJDLE1BQU07QUFDL0NyQjtBQUNELEdBRkQ7QUFHRCxDQWpCRCIsImZpbGUiOiJkZXYtd2VicGFjay5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBndWxwIGZyb20gJ2d1bHAnXG5pbXBvcnQgZ3V0aWwgZnJvbSAnZ3VscC11dGlsJ1xuaW1wb3J0IHdlYnBhY2sgZnJvbSAnd2VicGFjaydcbmltcG9ydCBXZWJwYWNrRGV2U2VydmVyIGZyb20gJ3dlYnBhY2stZGV2LXNlcnZlcidcbmltcG9ydCBjb25maWcgZnJvbSAnLi4vY29uZmlnJ1xuXG5ndWxwLnRhc2soJ2Rldi13ZWJwYWNrJywgKGNhbGxiYWNrKSA9PiB7XG4gIGNvbnN0IGNvbXBpbGVyID0gd2VicGFjayhjb25maWcud2VicGFjaylcbiAgY29uc3Qgd2VicGFja0RldlNlcnZlciA9IG5ldyBXZWJwYWNrRGV2U2VydmVyKGNvbXBpbGVyLCB7XG4gICAgY29udGVudEJhc2U6IGNvbmZpZy5wYXRocy5kc3QsXG4gICAgcHVibGljUGF0aDogY29uZmlnLmFzc2V0cy5wdWJsaWNQYXRoLFxuICAgIHN0YXRzOiB7XG4gICAgICBjb2xvcnM6IHRydWVcbiAgICB9XG4gIH0pXG5cbiAgd2VicGFja0RldlNlcnZlci5saXN0ZW4oY29uZmlnLmRldi53ZWJwYWNrUG9ydCwgY29uZmlnLmRldi5ob3N0LCAoZXJyKSA9PiB7XG4gICAgaWYgKGVycikgdGhyb3cgbmV3IGd1dGlsLlBsdWdpbkVycm9yKCd3ZWJwYWNrLWRldi1zZXJ2ZXInLCBlcnIpXG4gIH0pXG5cbiAgd2VicGFja0RldlNlcnZlci5taWRkbGV3YXJlLndhaXRVbnRpbFZhbGlkKCgpID0+IHtcbiAgICBjYWxsYmFjaygpXG4gIH0pXG59KVxuIl19