'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _path = require('path');

var _path2 = _interopRequireDefault(_path);

var _yargs = require('yargs');

var _loadConfigs = require('./lib/load-configs');

var _loadConfigs2 = _interopRequireDefault(_loadConfigs);

var _readPartialsDir = require('./lib/read-partials-dir');

var _readPartialsDir2 = _interopRequireDefault(_readPartialsDir);

var _configWebpack = require('./config-webpack');

var _configWebpack2 = _interopRequireDefault(_configWebpack);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var isGulpDebug = process.env.GULP_DEBUG === 'true';
var isProduction = process.env.NODE_ENV === 'production';
var isDevelopment = !isProduction;

var root = _yargs.argv.root;
var src = _path2.default.join(root, 'src');
var dst = _path2.default.join(root, 'build');

var DIR_PAGES = 'pages';
var DIR_CONTENT = 'content';
var DIR_HELPERS = 'helpers';
var DIR_PARTIALS = 'partials';
var DIR_LAYOUTS = 'layouts';
var DIR_SCRIPTS = 'scripts';
var DIR_STYLES = 'styles';
var DIR_ASSETS = 'assets';
var DIR_PUBLIC = 'public';
var TPL_ENGINE = 'handlebars';

var paths = {
  root: root,
  src: src,
  dst: dst,
  dstAssets: _path2.default.join(dst, DIR_ASSETS),
  srcPublic: _path2.default.join(src, DIR_PUBLIC),
  srcScripts: _path2.default.join(src, DIR_SCRIPTS),
  srcStyles: _path2.default.join(src, DIR_STYLES),
  srcLayouts: _path2.default.join(src, DIR_LAYOUTS),
  srcContent: _path2.default.join(src, DIR_CONTENT),
  srcPages: _path2.default.join(src, DIR_PAGES),
  srcHelpers: _path2.default.join(src, DIR_HELPERS),
  srcPartials: _path2.default.join(src, DIR_PARTIALS)
};

var config = {
  isGulpDebug: isGulpDebug,
  isProduction: isProduction,
  isDevelopment: isDevelopment,
  paths: paths,
  htmlmin: {
    pattern: '**/*.html'
  },
  pages: {
    directory: paths.srcPages
  },
  contentDir: {
    directory: paths.srcContent,
    transformer: 'wordpress'
  },
  helpers: {
    directory: paths.srcHelpers
  },
  layouts: {
    engine: TPL_ENGINE,
    directory: paths.srcLayouts,
    partials: paths.srcPartials
  },
  inplace: {
    engineOptions: {
      partials: (0, _readPartialsDir2.default)(paths.srcPartials)
    }
  },
  copy: {
    src: _path2.default.join(paths.srcPublic, '**/*')
  },
  assets: {
    scripts: _path2.default.join(paths.srcScripts, '*.js'),
    styles: _path2.default.join(paths.srcStyles, '*.css'),
    manifest: 'assets.json',
    publicPath: '/' + DIR_ASSETS + '/',
    dst: paths.dstAssets
  },
  dev: {
    host: 'localhost',
    webpackPort: 9000,
    browsersyncPort: 3000
  }
};

config = (0, _configWebpack2.default)(config);
(0, _loadConfigs2.default)(config, root);

exports.default = config;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9jb25maWcuanMiXSwibmFtZXMiOlsiaXNHdWxwRGVidWciLCJwcm9jZXNzIiwiZW52IiwiR1VMUF9ERUJVRyIsImlzUHJvZHVjdGlvbiIsIk5PREVfRU5WIiwiaXNEZXZlbG9wbWVudCIsInJvb3QiLCJhcmd2Iiwic3JjIiwicGF0aCIsImpvaW4iLCJkc3QiLCJESVJfUEFHRVMiLCJESVJfQ09OVEVOVCIsIkRJUl9IRUxQRVJTIiwiRElSX1BBUlRJQUxTIiwiRElSX0xBWU9VVFMiLCJESVJfU0NSSVBUUyIsIkRJUl9TVFlMRVMiLCJESVJfQVNTRVRTIiwiRElSX1BVQkxJQyIsIlRQTF9FTkdJTkUiLCJwYXRocyIsImRzdEFzc2V0cyIsInNyY1B1YmxpYyIsInNyY1NjcmlwdHMiLCJzcmNTdHlsZXMiLCJzcmNMYXlvdXRzIiwic3JjQ29udGVudCIsInNyY1BhZ2VzIiwic3JjSGVscGVycyIsInNyY1BhcnRpYWxzIiwiY29uZmlnIiwiaHRtbG1pbiIsInBhdHRlcm4iLCJwYWdlcyIsImRpcmVjdG9yeSIsImNvbnRlbnREaXIiLCJ0cmFuc2Zvcm1lciIsImhlbHBlcnMiLCJsYXlvdXRzIiwiZW5naW5lIiwicGFydGlhbHMiLCJpbnBsYWNlIiwiZW5naW5lT3B0aW9ucyIsImNvcHkiLCJhc3NldHMiLCJzY3JpcHRzIiwic3R5bGVzIiwibWFuaWZlc3QiLCJwdWJsaWNQYXRoIiwiZGV2IiwiaG9zdCIsIndlYnBhY2tQb3J0IiwiYnJvd3NlcnN5bmNQb3J0Il0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTs7OztBQUNBOztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7Ozs7O0FBRUEsSUFBTUEsY0FBY0MsUUFBUUMsR0FBUixDQUFZQyxVQUFaLEtBQTJCLE1BQS9DO0FBQ0EsSUFBTUMsZUFBZUgsUUFBUUMsR0FBUixDQUFZRyxRQUFaLEtBQXlCLFlBQTlDO0FBQ0EsSUFBTUMsZ0JBQWdCLENBQUNGLFlBQXZCOztBQUVBLElBQU1HLE9BQU9DLFlBQUtELElBQWxCO0FBQ0EsSUFBTUUsTUFBTUMsZUFBS0MsSUFBTCxDQUFVSixJQUFWLEVBQWdCLEtBQWhCLENBQVo7QUFDQSxJQUFNSyxNQUFNRixlQUFLQyxJQUFMLENBQVVKLElBQVYsRUFBZ0IsT0FBaEIsQ0FBWjs7QUFFQSxJQUFNTSxZQUFZLE9BQWxCO0FBQ0EsSUFBTUMsY0FBYyxTQUFwQjtBQUNBLElBQU1DLGNBQWMsU0FBcEI7QUFDQSxJQUFNQyxlQUFlLFVBQXJCO0FBQ0EsSUFBTUMsY0FBYyxTQUFwQjtBQUNBLElBQU1DLGNBQWMsU0FBcEI7QUFDQSxJQUFNQyxhQUFhLFFBQW5CO0FBQ0EsSUFBTUMsYUFBYSxRQUFuQjtBQUNBLElBQU1DLGFBQWEsUUFBbkI7QUFDQSxJQUFNQyxhQUFhLFlBQW5COztBQUVBLElBQU1DLFFBQVE7QUFDWmhCLFlBRFk7QUFFWkUsVUFGWTtBQUdaRyxVQUhZO0FBSVpZLGFBQVdkLGVBQUtDLElBQUwsQ0FBVUMsR0FBVixFQUFlUSxVQUFmLENBSkM7QUFLWkssYUFBV2YsZUFBS0MsSUFBTCxDQUFVRixHQUFWLEVBQWVZLFVBQWYsQ0FMQztBQU1aSyxjQUFZaEIsZUFBS0MsSUFBTCxDQUFVRixHQUFWLEVBQWVTLFdBQWYsQ0FOQTtBQU9aUyxhQUFXakIsZUFBS0MsSUFBTCxDQUFVRixHQUFWLEVBQWVVLFVBQWYsQ0FQQztBQVFaUyxjQUFZbEIsZUFBS0MsSUFBTCxDQUFVRixHQUFWLEVBQWVRLFdBQWYsQ0FSQTtBQVNaWSxjQUFZbkIsZUFBS0MsSUFBTCxDQUFVRixHQUFWLEVBQWVLLFdBQWYsQ0FUQTtBQVVaZ0IsWUFBVXBCLGVBQUtDLElBQUwsQ0FBVUYsR0FBVixFQUFlSSxTQUFmLENBVkU7QUFXWmtCLGNBQVlyQixlQUFLQyxJQUFMLENBQVVGLEdBQVYsRUFBZU0sV0FBZixDQVhBO0FBWVppQixlQUFhdEIsZUFBS0MsSUFBTCxDQUFVRixHQUFWLEVBQWVPLFlBQWY7QUFaRCxDQUFkOztBQWVBLElBQUlpQixTQUFTO0FBQ1hqQywwQkFEVztBQUVYSSw0QkFGVztBQUdYRSw4QkFIVztBQUlYaUIsY0FKVztBQUtYVyxXQUFTO0FBQ1BDLGFBQVM7QUFERixHQUxFO0FBUVhDLFNBQU87QUFDTEMsZUFBV2QsTUFBTU87QUFEWixHQVJJO0FBV1hRLGNBQVk7QUFDVkQsZUFBV2QsTUFBTU0sVUFEUDtBQUVWVSxpQkFBYTtBQUZILEdBWEQ7QUFlWEMsV0FBUztBQUNQSCxlQUFXZCxNQUFNUTtBQURWLEdBZkU7QUFrQlhVLFdBQVM7QUFDUEMsWUFBUXBCLFVBREQ7QUFFUGUsZUFBV2QsTUFBTUssVUFGVjtBQUdQZSxjQUFVcEIsTUFBTVM7QUFIVCxHQWxCRTtBQXVCWFksV0FBUztBQUNQQyxtQkFBZTtBQUNiRixnQkFBVSwrQkFBZ0JwQixNQUFNUyxXQUF0QjtBQURHO0FBRFIsR0F2QkU7QUE0QlhjLFFBQU07QUFDSnJDLFNBQUtDLGVBQUtDLElBQUwsQ0FBVVksTUFBTUUsU0FBaEIsRUFBMkIsTUFBM0I7QUFERCxHQTVCSztBQStCWHNCLFVBQVE7QUFDTkMsYUFBU3RDLGVBQUtDLElBQUwsQ0FBVVksTUFBTUcsVUFBaEIsRUFBNEIsTUFBNUIsQ0FESDtBQUVOdUIsWUFBUXZDLGVBQUtDLElBQUwsQ0FBVVksTUFBTUksU0FBaEIsRUFBMkIsT0FBM0IsQ0FGRjtBQUdOdUIsY0FBVSxhQUhKO0FBSU5DLHNCQUFnQi9CLFVBQWhCLE1BSk07QUFLTlIsU0FBS1csTUFBTUM7QUFMTCxHQS9CRztBQXNDWDRCLE9BQUs7QUFDSEMsVUFBTSxXQURIO0FBRUhDLGlCQUFhLElBRlY7QUFHSEMscUJBQWlCO0FBSGQ7QUF0Q00sQ0FBYjs7QUE2Q0F0QixTQUFTLDZCQUFjQSxNQUFkLENBQVQ7QUFDQSwyQkFBWUEsTUFBWixFQUFvQjFCLElBQXBCOztrQkFFZTBCLE0iLCJmaWxlIjoiY29uZmlnLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHBhdGggZnJvbSAncGF0aCdcbmltcG9ydCB7IGFyZ3YgfSBmcm9tICd5YXJncydcbmltcG9ydCBsb2FkQ29uZmlncyBmcm9tICcuL2xpYi9sb2FkLWNvbmZpZ3MnXG5pbXBvcnQgcmVhZFBhcnRpYWxzRGlyIGZyb20gJy4vbGliL3JlYWQtcGFydGlhbHMtZGlyJ1xuaW1wb3J0IHdlYnBhY2tDb25maWcgZnJvbSAnLi9jb25maWctd2VicGFjaydcblxuY29uc3QgaXNHdWxwRGVidWcgPSBwcm9jZXNzLmVudi5HVUxQX0RFQlVHID09PSAndHJ1ZSdcbmNvbnN0IGlzUHJvZHVjdGlvbiA9IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbidcbmNvbnN0IGlzRGV2ZWxvcG1lbnQgPSAhaXNQcm9kdWN0aW9uXG5cbmNvbnN0IHJvb3QgPSBhcmd2LnJvb3RcbmNvbnN0IHNyYyA9IHBhdGguam9pbihyb290LCAnc3JjJylcbmNvbnN0IGRzdCA9IHBhdGguam9pbihyb290LCAnYnVpbGQnKVxuXG5jb25zdCBESVJfUEFHRVMgPSAncGFnZXMnXG5jb25zdCBESVJfQ09OVEVOVCA9ICdjb250ZW50J1xuY29uc3QgRElSX0hFTFBFUlMgPSAnaGVscGVycydcbmNvbnN0IERJUl9QQVJUSUFMUyA9ICdwYXJ0aWFscydcbmNvbnN0IERJUl9MQVlPVVRTID0gJ2xheW91dHMnXG5jb25zdCBESVJfU0NSSVBUUyA9ICdzY3JpcHRzJ1xuY29uc3QgRElSX1NUWUxFUyA9ICdzdHlsZXMnXG5jb25zdCBESVJfQVNTRVRTID0gJ2Fzc2V0cydcbmNvbnN0IERJUl9QVUJMSUMgPSAncHVibGljJ1xuY29uc3QgVFBMX0VOR0lORSA9ICdoYW5kbGViYXJzJ1xuXG5jb25zdCBwYXRocyA9IHtcbiAgcm9vdCxcbiAgc3JjLFxuICBkc3QsXG4gIGRzdEFzc2V0czogcGF0aC5qb2luKGRzdCwgRElSX0FTU0VUUyksXG4gIHNyY1B1YmxpYzogcGF0aC5qb2luKHNyYywgRElSX1BVQkxJQyksXG4gIHNyY1NjcmlwdHM6IHBhdGguam9pbihzcmMsIERJUl9TQ1JJUFRTKSxcbiAgc3JjU3R5bGVzOiBwYXRoLmpvaW4oc3JjLCBESVJfU1RZTEVTKSxcbiAgc3JjTGF5b3V0czogcGF0aC5qb2luKHNyYywgRElSX0xBWU9VVFMpLFxuICBzcmNDb250ZW50OiBwYXRoLmpvaW4oc3JjLCBESVJfQ09OVEVOVCksXG4gIHNyY1BhZ2VzOiBwYXRoLmpvaW4oc3JjLCBESVJfUEFHRVMpLFxuICBzcmNIZWxwZXJzOiBwYXRoLmpvaW4oc3JjLCBESVJfSEVMUEVSUyksXG4gIHNyY1BhcnRpYWxzOiBwYXRoLmpvaW4oc3JjLCBESVJfUEFSVElBTFMpXG59XG5cbmxldCBjb25maWcgPSB7XG4gIGlzR3VscERlYnVnLFxuICBpc1Byb2R1Y3Rpb24sXG4gIGlzRGV2ZWxvcG1lbnQsXG4gIHBhdGhzLFxuICBodG1sbWluOiB7XG4gICAgcGF0dGVybjogJyoqLyouaHRtbCdcbiAgfSxcbiAgcGFnZXM6IHtcbiAgICBkaXJlY3Rvcnk6IHBhdGhzLnNyY1BhZ2VzXG4gIH0sXG4gIGNvbnRlbnREaXI6IHtcbiAgICBkaXJlY3Rvcnk6IHBhdGhzLnNyY0NvbnRlbnQsXG4gICAgdHJhbnNmb3JtZXI6ICd3b3JkcHJlc3MnXG4gIH0sXG4gIGhlbHBlcnM6IHtcbiAgICBkaXJlY3Rvcnk6IHBhdGhzLnNyY0hlbHBlcnNcbiAgfSxcbiAgbGF5b3V0czoge1xuICAgIGVuZ2luZTogVFBMX0VOR0lORSxcbiAgICBkaXJlY3Rvcnk6IHBhdGhzLnNyY0xheW91dHMsXG4gICAgcGFydGlhbHM6IHBhdGhzLnNyY1BhcnRpYWxzXG4gIH0sXG4gIGlucGxhY2U6IHtcbiAgICBlbmdpbmVPcHRpb25zOiB7XG4gICAgICBwYXJ0aWFsczogcmVhZFBhcnRpYWxzRGlyKHBhdGhzLnNyY1BhcnRpYWxzKVxuICAgIH1cbiAgfSxcbiAgY29weToge1xuICAgIHNyYzogcGF0aC5qb2luKHBhdGhzLnNyY1B1YmxpYywgJyoqLyonKVxuICB9LFxuICBhc3NldHM6IHtcbiAgICBzY3JpcHRzOiBwYXRoLmpvaW4ocGF0aHMuc3JjU2NyaXB0cywgJyouanMnKSxcbiAgICBzdHlsZXM6IHBhdGguam9pbihwYXRocy5zcmNTdHlsZXMsICcqLmNzcycpLFxuICAgIG1hbmlmZXN0OiAnYXNzZXRzLmpzb24nLFxuICAgIHB1YmxpY1BhdGg6IGAvJHtESVJfQVNTRVRTfS9gLFxuICAgIGRzdDogcGF0aHMuZHN0QXNzZXRzXG4gIH0sXG4gIGRldjoge1xuICAgIGhvc3Q6ICdsb2NhbGhvc3QnLFxuICAgIHdlYnBhY2tQb3J0OiA5MDAwLFxuICAgIGJyb3dzZXJzeW5jUG9ydDogMzAwMFxuICB9XG59XG5cbmNvbmZpZyA9IHdlYnBhY2tDb25maWcoY29uZmlnKVxubG9hZENvbmZpZ3MoY29uZmlnLCByb290KVxuXG5leHBvcnQgZGVmYXVsdCBjb25maWdcbiJdfQ==