'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _path = require('path');

var _path2 = _interopRequireDefault(_path);

var _yargs = require('yargs');

var _loadConfigs = require('./lib/load-configs');

var _loadConfigs2 = _interopRequireDefault(_loadConfigs);

var _readPartialsDir = require('./lib/read-partials-dir');

var _readPartialsDir2 = _interopRequireDefault(_readPartialsDir);

var _configWebpack = require('./config-webpack');

var _configWebpack2 = _interopRequireDefault(_configWebpack);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const isGulpDebug = process.env.GULP_DEBUG === 'true';
const isProduction = process.env.NODE_ENV === 'production';
const isDevelopment = !isProduction;

const root = _yargs.argv.root;
const src = _path2.default.join(root, 'src');
const dst = _path2.default.join(root, 'build');

const DIR_PAGES = 'pages';
const DIR_CONTENT = 'content';
const DIR_HELPERS = 'helpers';
const DIR_PARTIALS = 'partials';
const DIR_LAYOUTS = 'layouts';
const DIR_SCRIPTS = 'scripts';
const DIR_STYLES = 'styles';
const DIR_ASSETS = 'assets';
const DIR_PUBLIC = 'public';
const TPL_ENGINE = 'handlebars';

const paths = {
  root,
  src,
  dst,
  dstAssets: _path2.default.join(dst, DIR_ASSETS),
  srcPublic: _path2.default.join(src, DIR_PUBLIC),
  srcScripts: _path2.default.join(src, DIR_SCRIPTS),
  srcStyles: _path2.default.join(src, DIR_STYLES),
  srcLayouts: _path2.default.join(src, DIR_LAYOUTS),
  srcContent: _path2.default.join(src, DIR_CONTENT),
  srcPages: _path2.default.join(src, DIR_PAGES),
  srcHelpers: _path2.default.join(src, DIR_HELPERS),
  srcPartials: _path2.default.join(src, DIR_PARTIALS)
};

let config = {
  isGulpDebug,
  isProduction,
  isDevelopment,
  paths,
  htmlmin: {
    pattern: '**/*.html'
  },
  pages: {
    directory: paths.srcPages
  },
  contentDir: {
    directory: paths.srcContent,
    transformer: 'wordpress'
  },
  helpers: {
    directory: paths.srcHelpers
  },
  layouts: {
    engine: TPL_ENGINE,
    directory: paths.srcLayouts,
    partials: paths.srcPartials
  },
  inplace: {
    engineOptions: {
      partials: (0, _readPartialsDir2.default)(paths.srcPartials)
    }
  },
  copy: {
    src: _path2.default.join(paths.srcPublic, '**/*')
  },
  assets: {
    scripts: _path2.default.join(paths.srcScripts, '*.js'),
    styles: _path2.default.join(paths.srcStyles, '*.css'),
    manifest: 'assets.json',
    publicPath: `/${DIR_ASSETS}/`,
    dst: paths.dstAssets
  },
  dev: {
    host: 'localhost',
    webpackPort: 9000,
    browsersyncPort: 3000
  }
};

config = (0, _configWebpack2.default)(config);
(0, _loadConfigs2.default)(config, root);

exports.default = config;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9jb25maWcuanMiXSwibmFtZXMiOlsiaXNHdWxwRGVidWciLCJwcm9jZXNzIiwiZW52IiwiR1VMUF9ERUJVRyIsImlzUHJvZHVjdGlvbiIsIk5PREVfRU5WIiwiaXNEZXZlbG9wbWVudCIsInJvb3QiLCJhcmd2Iiwic3JjIiwicGF0aCIsImpvaW4iLCJkc3QiLCJESVJfUEFHRVMiLCJESVJfQ09OVEVOVCIsIkRJUl9IRUxQRVJTIiwiRElSX1BBUlRJQUxTIiwiRElSX0xBWU9VVFMiLCJESVJfU0NSSVBUUyIsIkRJUl9TVFlMRVMiLCJESVJfQVNTRVRTIiwiRElSX1BVQkxJQyIsIlRQTF9FTkdJTkUiLCJwYXRocyIsImRzdEFzc2V0cyIsInNyY1B1YmxpYyIsInNyY1NjcmlwdHMiLCJzcmNTdHlsZXMiLCJzcmNMYXlvdXRzIiwic3JjQ29udGVudCIsInNyY1BhZ2VzIiwic3JjSGVscGVycyIsInNyY1BhcnRpYWxzIiwiY29uZmlnIiwiaHRtbG1pbiIsInBhdHRlcm4iLCJwYWdlcyIsImRpcmVjdG9yeSIsImNvbnRlbnREaXIiLCJ0cmFuc2Zvcm1lciIsImhlbHBlcnMiLCJsYXlvdXRzIiwiZW5naW5lIiwicGFydGlhbHMiLCJpbnBsYWNlIiwiZW5naW5lT3B0aW9ucyIsImNvcHkiLCJhc3NldHMiLCJzY3JpcHRzIiwic3R5bGVzIiwibWFuaWZlc3QiLCJwdWJsaWNQYXRoIiwiZGV2IiwiaG9zdCIsIndlYnBhY2tQb3J0IiwiYnJvd3NlcnN5bmNQb3J0Il0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTs7OztBQUNBOztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7Ozs7O0FBRUEsTUFBTUEsY0FBY0MsUUFBUUMsR0FBUixDQUFZQyxVQUFaLEtBQTJCLE1BQS9DO0FBQ0EsTUFBTUMsZUFBZUgsUUFBUUMsR0FBUixDQUFZRyxRQUFaLEtBQXlCLFlBQTlDO0FBQ0EsTUFBTUMsZ0JBQWdCLENBQUNGLFlBQXZCOztBQUVBLE1BQU1HLE9BQU9DLFlBQUtELElBQWxCO0FBQ0EsTUFBTUUsTUFBTUMsZUFBS0MsSUFBTCxDQUFVSixJQUFWLEVBQWdCLEtBQWhCLENBQVo7QUFDQSxNQUFNSyxNQUFNRixlQUFLQyxJQUFMLENBQVVKLElBQVYsRUFBZ0IsT0FBaEIsQ0FBWjs7QUFFQSxNQUFNTSxZQUFZLE9BQWxCO0FBQ0EsTUFBTUMsY0FBYyxTQUFwQjtBQUNBLE1BQU1DLGNBQWMsU0FBcEI7QUFDQSxNQUFNQyxlQUFlLFVBQXJCO0FBQ0EsTUFBTUMsY0FBYyxTQUFwQjtBQUNBLE1BQU1DLGNBQWMsU0FBcEI7QUFDQSxNQUFNQyxhQUFhLFFBQW5CO0FBQ0EsTUFBTUMsYUFBYSxRQUFuQjtBQUNBLE1BQU1DLGFBQWEsUUFBbkI7QUFDQSxNQUFNQyxhQUFhLFlBQW5COztBQUVBLE1BQU1DLFFBQVE7QUFDWmhCLE1BRFk7QUFFWkUsS0FGWTtBQUdaRyxLQUhZO0FBSVpZLGFBQVdkLGVBQUtDLElBQUwsQ0FBVUMsR0FBVixFQUFlUSxVQUFmLENBSkM7QUFLWkssYUFBV2YsZUFBS0MsSUFBTCxDQUFVRixHQUFWLEVBQWVZLFVBQWYsQ0FMQztBQU1aSyxjQUFZaEIsZUFBS0MsSUFBTCxDQUFVRixHQUFWLEVBQWVTLFdBQWYsQ0FOQTtBQU9aUyxhQUFXakIsZUFBS0MsSUFBTCxDQUFVRixHQUFWLEVBQWVVLFVBQWYsQ0FQQztBQVFaUyxjQUFZbEIsZUFBS0MsSUFBTCxDQUFVRixHQUFWLEVBQWVRLFdBQWYsQ0FSQTtBQVNaWSxjQUFZbkIsZUFBS0MsSUFBTCxDQUFVRixHQUFWLEVBQWVLLFdBQWYsQ0FUQTtBQVVaZ0IsWUFBVXBCLGVBQUtDLElBQUwsQ0FBVUYsR0FBVixFQUFlSSxTQUFmLENBVkU7QUFXWmtCLGNBQVlyQixlQUFLQyxJQUFMLENBQVVGLEdBQVYsRUFBZU0sV0FBZixDQVhBO0FBWVppQixlQUFhdEIsZUFBS0MsSUFBTCxDQUFVRixHQUFWLEVBQWVPLFlBQWY7QUFaRCxDQUFkOztBQWVBLElBQUlpQixTQUFTO0FBQ1hqQyxhQURXO0FBRVhJLGNBRlc7QUFHWEUsZUFIVztBQUlYaUIsT0FKVztBQUtYVyxXQUFTO0FBQ1BDLGFBQVM7QUFERixHQUxFO0FBUVhDLFNBQU87QUFDTEMsZUFBV2QsTUFBTU87QUFEWixHQVJJO0FBV1hRLGNBQVk7QUFDVkQsZUFBV2QsTUFBTU0sVUFEUDtBQUVWVSxpQkFBYTtBQUZILEdBWEQ7QUFlWEMsV0FBUztBQUNQSCxlQUFXZCxNQUFNUTtBQURWLEdBZkU7QUFrQlhVLFdBQVM7QUFDUEMsWUFBUXBCLFVBREQ7QUFFUGUsZUFBV2QsTUFBTUssVUFGVjtBQUdQZSxjQUFVcEIsTUFBTVM7QUFIVCxHQWxCRTtBQXVCWFksV0FBUztBQUNQQyxtQkFBZTtBQUNiRixnQkFBVSwrQkFBZ0JwQixNQUFNUyxXQUF0QjtBQURHO0FBRFIsR0F2QkU7QUE0QlhjLFFBQU07QUFDSnJDLFNBQUtDLGVBQUtDLElBQUwsQ0FBVVksTUFBTUUsU0FBaEIsRUFBMkIsTUFBM0I7QUFERCxHQTVCSztBQStCWHNCLFVBQVE7QUFDTkMsYUFBU3RDLGVBQUtDLElBQUwsQ0FBVVksTUFBTUcsVUFBaEIsRUFBNEIsTUFBNUIsQ0FESDtBQUVOdUIsWUFBUXZDLGVBQUtDLElBQUwsQ0FBVVksTUFBTUksU0FBaEIsRUFBMkIsT0FBM0IsQ0FGRjtBQUdOdUIsY0FBVSxhQUhKO0FBSU5DLGdCQUFhLElBQUcvQixVQUFXLEdBSnJCO0FBS05SLFNBQUtXLE1BQU1DO0FBTEwsR0EvQkc7QUFzQ1g0QixPQUFLO0FBQ0hDLFVBQU0sV0FESDtBQUVIQyxpQkFBYSxJQUZWO0FBR0hDLHFCQUFpQjtBQUhkO0FBdENNLENBQWI7O0FBNkNBdEIsU0FBUyw2QkFBY0EsTUFBZCxDQUFUO0FBQ0EsMkJBQVlBLE1BQVosRUFBb0IxQixJQUFwQjs7a0JBRWUwQixNIiwiZmlsZSI6ImNvbmZpZy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBwYXRoIGZyb20gJ3BhdGgnXG5pbXBvcnQgeyBhcmd2IH0gZnJvbSAneWFyZ3MnXG5pbXBvcnQgbG9hZENvbmZpZ3MgZnJvbSAnLi9saWIvbG9hZC1jb25maWdzJ1xuaW1wb3J0IHJlYWRQYXJ0aWFsc0RpciBmcm9tICcuL2xpYi9yZWFkLXBhcnRpYWxzLWRpcidcbmltcG9ydCB3ZWJwYWNrQ29uZmlnIGZyb20gJy4vY29uZmlnLXdlYnBhY2snXG5cbmNvbnN0IGlzR3VscERlYnVnID0gcHJvY2Vzcy5lbnYuR1VMUF9ERUJVRyA9PT0gJ3RydWUnXG5jb25zdCBpc1Byb2R1Y3Rpb24gPSBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nXG5jb25zdCBpc0RldmVsb3BtZW50ID0gIWlzUHJvZHVjdGlvblxuXG5jb25zdCByb290ID0gYXJndi5yb290XG5jb25zdCBzcmMgPSBwYXRoLmpvaW4ocm9vdCwgJ3NyYycpXG5jb25zdCBkc3QgPSBwYXRoLmpvaW4ocm9vdCwgJ2J1aWxkJylcblxuY29uc3QgRElSX1BBR0VTID0gJ3BhZ2VzJ1xuY29uc3QgRElSX0NPTlRFTlQgPSAnY29udGVudCdcbmNvbnN0IERJUl9IRUxQRVJTID0gJ2hlbHBlcnMnXG5jb25zdCBESVJfUEFSVElBTFMgPSAncGFydGlhbHMnXG5jb25zdCBESVJfTEFZT1VUUyA9ICdsYXlvdXRzJ1xuY29uc3QgRElSX1NDUklQVFMgPSAnc2NyaXB0cydcbmNvbnN0IERJUl9TVFlMRVMgPSAnc3R5bGVzJ1xuY29uc3QgRElSX0FTU0VUUyA9ICdhc3NldHMnXG5jb25zdCBESVJfUFVCTElDID0gJ3B1YmxpYydcbmNvbnN0IFRQTF9FTkdJTkUgPSAnaGFuZGxlYmFycydcblxuY29uc3QgcGF0aHMgPSB7XG4gIHJvb3QsXG4gIHNyYyxcbiAgZHN0LFxuICBkc3RBc3NldHM6IHBhdGguam9pbihkc3QsIERJUl9BU1NFVFMpLFxuICBzcmNQdWJsaWM6IHBhdGguam9pbihzcmMsIERJUl9QVUJMSUMpLFxuICBzcmNTY3JpcHRzOiBwYXRoLmpvaW4oc3JjLCBESVJfU0NSSVBUUyksXG4gIHNyY1N0eWxlczogcGF0aC5qb2luKHNyYywgRElSX1NUWUxFUyksXG4gIHNyY0xheW91dHM6IHBhdGguam9pbihzcmMsIERJUl9MQVlPVVRTKSxcbiAgc3JjQ29udGVudDogcGF0aC5qb2luKHNyYywgRElSX0NPTlRFTlQpLFxuICBzcmNQYWdlczogcGF0aC5qb2luKHNyYywgRElSX1BBR0VTKSxcbiAgc3JjSGVscGVyczogcGF0aC5qb2luKHNyYywgRElSX0hFTFBFUlMpLFxuICBzcmNQYXJ0aWFsczogcGF0aC5qb2luKHNyYywgRElSX1BBUlRJQUxTKVxufVxuXG5sZXQgY29uZmlnID0ge1xuICBpc0d1bHBEZWJ1ZyxcbiAgaXNQcm9kdWN0aW9uLFxuICBpc0RldmVsb3BtZW50LFxuICBwYXRocyxcbiAgaHRtbG1pbjoge1xuICAgIHBhdHRlcm46ICcqKi8qLmh0bWwnXG4gIH0sXG4gIHBhZ2VzOiB7XG4gICAgZGlyZWN0b3J5OiBwYXRocy5zcmNQYWdlc1xuICB9LFxuICBjb250ZW50RGlyOiB7XG4gICAgZGlyZWN0b3J5OiBwYXRocy5zcmNDb250ZW50LFxuICAgIHRyYW5zZm9ybWVyOiAnd29yZHByZXNzJ1xuICB9LFxuICBoZWxwZXJzOiB7XG4gICAgZGlyZWN0b3J5OiBwYXRocy5zcmNIZWxwZXJzXG4gIH0sXG4gIGxheW91dHM6IHtcbiAgICBlbmdpbmU6IFRQTF9FTkdJTkUsXG4gICAgZGlyZWN0b3J5OiBwYXRocy5zcmNMYXlvdXRzLFxuICAgIHBhcnRpYWxzOiBwYXRocy5zcmNQYXJ0aWFsc1xuICB9LFxuICBpbnBsYWNlOiB7XG4gICAgZW5naW5lT3B0aW9uczoge1xuICAgICAgcGFydGlhbHM6IHJlYWRQYXJ0aWFsc0RpcihwYXRocy5zcmNQYXJ0aWFscylcbiAgICB9XG4gIH0sXG4gIGNvcHk6IHtcbiAgICBzcmM6IHBhdGguam9pbihwYXRocy5zcmNQdWJsaWMsICcqKi8qJylcbiAgfSxcbiAgYXNzZXRzOiB7XG4gICAgc2NyaXB0czogcGF0aC5qb2luKHBhdGhzLnNyY1NjcmlwdHMsICcqLmpzJyksXG4gICAgc3R5bGVzOiBwYXRoLmpvaW4ocGF0aHMuc3JjU3R5bGVzLCAnKi5jc3MnKSxcbiAgICBtYW5pZmVzdDogJ2Fzc2V0cy5qc29uJyxcbiAgICBwdWJsaWNQYXRoOiBgLyR7RElSX0FTU0VUU30vYCxcbiAgICBkc3Q6IHBhdGhzLmRzdEFzc2V0c1xuICB9LFxuICBkZXY6IHtcbiAgICBob3N0OiAnbG9jYWxob3N0JyxcbiAgICB3ZWJwYWNrUG9ydDogOTAwMCxcbiAgICBicm93c2Vyc3luY1BvcnQ6IDMwMDBcbiAgfVxufVxuXG5jb25maWcgPSB3ZWJwYWNrQ29uZmlnKGNvbmZpZylcbmxvYWRDb25maWdzKGNvbmZpZywgcm9vdClcblxuZXhwb3J0IGRlZmF1bHQgY29uZmlnXG4iXX0=