'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _path = require('path');

var _path2 = _interopRequireDefault(_path);

var _yargs = require('yargs');

var _loadConfigs = require('./lib/load-configs');

var _loadConfigs2 = _interopRequireDefault(_loadConfigs);

var _readPartialsDir = require('./lib/read-partials-dir');

var _readPartialsDir2 = _interopRequireDefault(_readPartialsDir);

var _configWebpack = require('./config-webpack');

var _configWebpack2 = _interopRequireDefault(_configWebpack);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var isGulpDebug = process.env.GULP_DEBUG === 'true';
var isProduction = process.env.NODE_ENV === 'production';
var isDevelopment = !isProduction;

var root = _yargs.argv.root;
var src = _path2.default.join(root, 'src');
var dst = _path2.default.join(root, 'build');

var DIR_PAGES = 'pages';
var DIR_CONTENT = 'content';
var DIR_HELPERS = 'helpers';
var DIR_PARTIALS = 'partials';
var DIR_LAYOUTS = 'layouts';
var DIR_SCRIPTS = 'scripts';
var DIR_STYLES = 'styles';
var DIR_ASSETS = 'assets';
var DIR_PUBLIC = 'public';
var TPL_ENGINE = 'handlebars';

var config = {
  isGulpDebug: isGulpDebug,
  isProduction: isProduction,
  isDevelopment: isDevelopment,
  paths: {
    root: root,
    src: src,
    dst: dst,
    srcScripts: _path2.default.join(src, DIR_SCRIPTS)
  },
  metaToFiles: {
    slugOptions: {
      replace: /[^a-z0-9]/g
    }
  },
  htmlmin: {
    pattern: '**/*.html'
  },
  pages: {
    directory: _path2.default.join(src, DIR_PAGES)
  },
  contentDir: {
    directory: _path2.default.join(src, DIR_CONTENT),
    transformer: 'wordpress'
  },
  helpers: {
    directory: _path2.default.join(src, DIR_HELPERS)
  },
  layouts: {
    engine: TPL_ENGINE,
    directory: _path2.default.join(src, DIR_LAYOUTS),
    partials: _path2.default.join(src, DIR_PARTIALS)
  },
  inplace: {
    engineOptions: {
      partials: (0, _readPartialsDir2.default)(_path2.default.join(src, DIR_PARTIALS))
    }
  },
  copy: {
    src: _path2.default.join(src, DIR_PUBLIC, '**/*')
  },
  assets: {
    scripts: _path2.default.join(src, DIR_SCRIPTS, '*.js'),
    styles: _path2.default.join(src, DIR_STYLES, '*.css'),
    manifest: 'assets.json',
    publicPath: '/' + DIR_ASSETS + '/',
    dst: _path2.default.join(dst, DIR_ASSETS)
  },
  dev: {
    host: 'localhost',
    webpackPort: 9000,
    browsersyncPort: 3000
  }
};

config = (0, _configWebpack2.default)(config);
(0, _loadConfigs2.default)(config, root);

exports.default = config;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9jb25maWcuanMiXSwibmFtZXMiOlsiaXNHdWxwRGVidWciLCJwcm9jZXNzIiwiZW52IiwiR1VMUF9ERUJVRyIsImlzUHJvZHVjdGlvbiIsIk5PREVfRU5WIiwiaXNEZXZlbG9wbWVudCIsInJvb3QiLCJhcmd2Iiwic3JjIiwicGF0aCIsImpvaW4iLCJkc3QiLCJESVJfUEFHRVMiLCJESVJfQ09OVEVOVCIsIkRJUl9IRUxQRVJTIiwiRElSX1BBUlRJQUxTIiwiRElSX0xBWU9VVFMiLCJESVJfU0NSSVBUUyIsIkRJUl9TVFlMRVMiLCJESVJfQVNTRVRTIiwiRElSX1BVQkxJQyIsIlRQTF9FTkdJTkUiLCJjb25maWciLCJwYXRocyIsInNyY1NjcmlwdHMiLCJtZXRhVG9GaWxlcyIsInNsdWdPcHRpb25zIiwicmVwbGFjZSIsImh0bWxtaW4iLCJwYXR0ZXJuIiwicGFnZXMiLCJkaXJlY3RvcnkiLCJjb250ZW50RGlyIiwidHJhbnNmb3JtZXIiLCJoZWxwZXJzIiwibGF5b3V0cyIsImVuZ2luZSIsInBhcnRpYWxzIiwiaW5wbGFjZSIsImVuZ2luZU9wdGlvbnMiLCJjb3B5IiwiYXNzZXRzIiwic2NyaXB0cyIsInN0eWxlcyIsIm1hbmlmZXN0IiwicHVibGljUGF0aCIsImRldiIsImhvc3QiLCJ3ZWJwYWNrUG9ydCIsImJyb3dzZXJzeW5jUG9ydCJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7Ozs7QUFDQTs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7OztBQUVBLElBQU1BLGNBQWNDLFFBQVFDLEdBQVIsQ0FBWUMsVUFBWixLQUEyQixNQUEvQztBQUNBLElBQU1DLGVBQWVILFFBQVFDLEdBQVIsQ0FBWUcsUUFBWixLQUF5QixZQUE5QztBQUNBLElBQU1DLGdCQUFnQixDQUFDRixZQUF2Qjs7QUFFQSxJQUFNRyxPQUFPQyxZQUFLRCxJQUFsQjtBQUNBLElBQU1FLE1BQU1DLGVBQUtDLElBQUwsQ0FBVUosSUFBVixFQUFnQixLQUFoQixDQUFaO0FBQ0EsSUFBTUssTUFBTUYsZUFBS0MsSUFBTCxDQUFVSixJQUFWLEVBQWdCLE9BQWhCLENBQVo7O0FBRUEsSUFBTU0sWUFBWSxPQUFsQjtBQUNBLElBQU1DLGNBQWMsU0FBcEI7QUFDQSxJQUFNQyxjQUFjLFNBQXBCO0FBQ0EsSUFBTUMsZUFBZSxVQUFyQjtBQUNBLElBQU1DLGNBQWMsU0FBcEI7QUFDQSxJQUFNQyxjQUFjLFNBQXBCO0FBQ0EsSUFBTUMsYUFBYSxRQUFuQjtBQUNBLElBQU1DLGFBQWEsUUFBbkI7QUFDQSxJQUFNQyxhQUFhLFFBQW5CO0FBQ0EsSUFBTUMsYUFBYSxZQUFuQjs7QUFFQSxJQUFJQyxTQUFTO0FBQ1h2QiwwQkFEVztBQUVYSSw0QkFGVztBQUdYRSw4QkFIVztBQUlYa0IsU0FBTztBQUNMakIsY0FESztBQUVMRSxZQUZLO0FBR0xHLFlBSEs7QUFJTGEsZ0JBQVlmLGVBQUtDLElBQUwsQ0FBVUYsR0FBVixFQUFlUyxXQUFmO0FBSlAsR0FKSTtBQVVYUSxlQUFhO0FBQ1hDLGlCQUFhO0FBQ1hDLGVBQVM7QUFERTtBQURGLEdBVkY7QUFlWEMsV0FBUztBQUNQQyxhQUFTO0FBREYsR0FmRTtBQWtCWEMsU0FBTztBQUNMQyxlQUFXdEIsZUFBS0MsSUFBTCxDQUFVRixHQUFWLEVBQWVJLFNBQWY7QUFETixHQWxCSTtBQXFCWG9CLGNBQVk7QUFDVkQsZUFBV3RCLGVBQUtDLElBQUwsQ0FBVUYsR0FBVixFQUFlSyxXQUFmLENBREQ7QUFFVm9CLGlCQUFhO0FBRkgsR0FyQkQ7QUF5QlhDLFdBQVM7QUFDUEgsZUFBV3RCLGVBQUtDLElBQUwsQ0FBVUYsR0FBVixFQUFlTSxXQUFmO0FBREosR0F6QkU7QUE0QlhxQixXQUFTO0FBQ1BDLFlBQVFmLFVBREQ7QUFFUFUsZUFBV3RCLGVBQUtDLElBQUwsQ0FBVUYsR0FBVixFQUFlUSxXQUFmLENBRko7QUFHUHFCLGNBQVU1QixlQUFLQyxJQUFMLENBQVVGLEdBQVYsRUFBZU8sWUFBZjtBQUhILEdBNUJFO0FBaUNYdUIsV0FBUztBQUNQQyxtQkFBZTtBQUNiRixnQkFBVSwrQkFBZ0I1QixlQUFLQyxJQUFMLENBQVVGLEdBQVYsRUFBZU8sWUFBZixDQUFoQjtBQURHO0FBRFIsR0FqQ0U7QUFzQ1h5QixRQUFNO0FBQ0poQyxTQUFLQyxlQUFLQyxJQUFMLENBQVVGLEdBQVYsRUFBZVksVUFBZixFQUEyQixNQUEzQjtBQURELEdBdENLO0FBeUNYcUIsVUFBUTtBQUNOQyxhQUFTakMsZUFBS0MsSUFBTCxDQUFVRixHQUFWLEVBQWVTLFdBQWYsRUFBNEIsTUFBNUIsQ0FESDtBQUVOMEIsWUFBUWxDLGVBQUtDLElBQUwsQ0FBVUYsR0FBVixFQUFlVSxVQUFmLEVBQTJCLE9BQTNCLENBRkY7QUFHTjBCLGNBQVUsYUFISjtBQUlOQyxzQkFBZ0IxQixVQUFoQixNQUpNO0FBS05SLFNBQUtGLGVBQUtDLElBQUwsQ0FBVUMsR0FBVixFQUFlUSxVQUFmO0FBTEMsR0F6Q0c7QUFnRFgyQixPQUFLO0FBQ0hDLFVBQU0sV0FESDtBQUVIQyxpQkFBYSxJQUZWO0FBR0hDLHFCQUFpQjtBQUhkO0FBaERNLENBQWI7O0FBdURBM0IsU0FBUyw2QkFBY0EsTUFBZCxDQUFUO0FBQ0EsMkJBQVlBLE1BQVosRUFBb0JoQixJQUFwQjs7a0JBRWVnQixNIiwiZmlsZSI6ImNvbmZpZy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBwYXRoIGZyb20gJ3BhdGgnXG5pbXBvcnQgeyBhcmd2IH0gZnJvbSAneWFyZ3MnXG5pbXBvcnQgbG9hZENvbmZpZ3MgZnJvbSAnLi9saWIvbG9hZC1jb25maWdzJ1xuaW1wb3J0IHJlYWRQYXJ0aWFsc0RpciBmcm9tICcuL2xpYi9yZWFkLXBhcnRpYWxzLWRpcidcbmltcG9ydCB3ZWJwYWNrQ29uZmlnIGZyb20gJy4vY29uZmlnLXdlYnBhY2snXG5cbmNvbnN0IGlzR3VscERlYnVnID0gcHJvY2Vzcy5lbnYuR1VMUF9ERUJVRyA9PT0gJ3RydWUnXG5jb25zdCBpc1Byb2R1Y3Rpb24gPSBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nXG5jb25zdCBpc0RldmVsb3BtZW50ID0gIWlzUHJvZHVjdGlvblxuXG5jb25zdCByb290ID0gYXJndi5yb290XG5jb25zdCBzcmMgPSBwYXRoLmpvaW4ocm9vdCwgJ3NyYycpXG5jb25zdCBkc3QgPSBwYXRoLmpvaW4ocm9vdCwgJ2J1aWxkJylcblxuY29uc3QgRElSX1BBR0VTID0gJ3BhZ2VzJ1xuY29uc3QgRElSX0NPTlRFTlQgPSAnY29udGVudCdcbmNvbnN0IERJUl9IRUxQRVJTID0gJ2hlbHBlcnMnXG5jb25zdCBESVJfUEFSVElBTFMgPSAncGFydGlhbHMnXG5jb25zdCBESVJfTEFZT1VUUyA9ICdsYXlvdXRzJ1xuY29uc3QgRElSX1NDUklQVFMgPSAnc2NyaXB0cydcbmNvbnN0IERJUl9TVFlMRVMgPSAnc3R5bGVzJ1xuY29uc3QgRElSX0FTU0VUUyA9ICdhc3NldHMnXG5jb25zdCBESVJfUFVCTElDID0gJ3B1YmxpYydcbmNvbnN0IFRQTF9FTkdJTkUgPSAnaGFuZGxlYmFycydcblxubGV0IGNvbmZpZyA9IHtcbiAgaXNHdWxwRGVidWcsXG4gIGlzUHJvZHVjdGlvbixcbiAgaXNEZXZlbG9wbWVudCxcbiAgcGF0aHM6IHtcbiAgICByb290LFxuICAgIHNyYyxcbiAgICBkc3QsXG4gICAgc3JjU2NyaXB0czogcGF0aC5qb2luKHNyYywgRElSX1NDUklQVFMpXG4gIH0sXG4gIG1ldGFUb0ZpbGVzOiB7XG4gICAgc2x1Z09wdGlvbnM6IHtcbiAgICAgIHJlcGxhY2U6IC9bXmEtejAtOV0vZ1xuICAgIH1cbiAgfSxcbiAgaHRtbG1pbjoge1xuICAgIHBhdHRlcm46ICcqKi8qLmh0bWwnXG4gIH0sXG4gIHBhZ2VzOiB7XG4gICAgZGlyZWN0b3J5OiBwYXRoLmpvaW4oc3JjLCBESVJfUEFHRVMpXG4gIH0sXG4gIGNvbnRlbnREaXI6IHtcbiAgICBkaXJlY3Rvcnk6IHBhdGguam9pbihzcmMsIERJUl9DT05URU5UKSxcbiAgICB0cmFuc2Zvcm1lcjogJ3dvcmRwcmVzcydcbiAgfSxcbiAgaGVscGVyczoge1xuICAgIGRpcmVjdG9yeTogcGF0aC5qb2luKHNyYywgRElSX0hFTFBFUlMpXG4gIH0sXG4gIGxheW91dHM6IHtcbiAgICBlbmdpbmU6IFRQTF9FTkdJTkUsXG4gICAgZGlyZWN0b3J5OiBwYXRoLmpvaW4oc3JjLCBESVJfTEFZT1VUUyksXG4gICAgcGFydGlhbHM6IHBhdGguam9pbihzcmMsIERJUl9QQVJUSUFMUylcbiAgfSxcbiAgaW5wbGFjZToge1xuICAgIGVuZ2luZU9wdGlvbnM6IHtcbiAgICAgIHBhcnRpYWxzOiByZWFkUGFydGlhbHNEaXIocGF0aC5qb2luKHNyYywgRElSX1BBUlRJQUxTKSlcbiAgICB9XG4gIH0sXG4gIGNvcHk6IHtcbiAgICBzcmM6IHBhdGguam9pbihzcmMsIERJUl9QVUJMSUMsICcqKi8qJylcbiAgfSxcbiAgYXNzZXRzOiB7XG4gICAgc2NyaXB0czogcGF0aC5qb2luKHNyYywgRElSX1NDUklQVFMsICcqLmpzJyksXG4gICAgc3R5bGVzOiBwYXRoLmpvaW4oc3JjLCBESVJfU1RZTEVTLCAnKi5jc3MnKSxcbiAgICBtYW5pZmVzdDogJ2Fzc2V0cy5qc29uJyxcbiAgICBwdWJsaWNQYXRoOiBgLyR7RElSX0FTU0VUU30vYCxcbiAgICBkc3Q6IHBhdGguam9pbihkc3QsIERJUl9BU1NFVFMpXG4gIH0sXG4gIGRldjoge1xuICAgIGhvc3Q6ICdsb2NhbGhvc3QnLFxuICAgIHdlYnBhY2tQb3J0OiA5MDAwLFxuICAgIGJyb3dzZXJzeW5jUG9ydDogMzAwMFxuICB9XG59XG5cbmNvbmZpZyA9IHdlYnBhY2tDb25maWcoY29uZmlnKVxubG9hZENvbmZpZ3MoY29uZmlnLCByb290KVxuXG5leHBvcnQgZGVmYXVsdCBjb25maWdcbiJdfQ==